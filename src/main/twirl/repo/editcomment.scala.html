@(content: String, commentId: Int, owner: String, repository: String)(implicit context: app.Context)
@import context._
<span id="error-edit-content-@commentId" class="error"></span>
@helper.html.attached(owner, repository){
  <textarea style="width: 635px; height: 100px;" id="edit-content-@commentId">@content</textarea>
}
<div>
  <input type="button" id="cancel-comment-@commentId" class="btn btn-small btn-danger" value="Cancel"/>
  <input type="button" id="update-comment-@commentId" class="btn btn-small pull-right" value="Update comment"/>
</div>
<script>
$(function(){
  var curriedCallback = function($inline) {
    return function(data){
      $('#update-comment-@commentId, #cancel-comment-@commentId', $inline).removeAttr('disabled');
      $('#commit-commentContent-@commentId', $inline).empty().html(data.content);
      prettyPrint();
    }
  }

  $('#update-comment-@commentId').click(function(){
    $inline = $(this).closest('.inline-comment');
    $('#update-comment-@commentId, #cancel-comment-@commentId', $inline).attr('disabled', 'disabled');
    $.ajax({
      url: '@path/@owner/@repository/commit_comments/edit/@commentId',
      type: 'POST',
      data: {
        issueId : 0,	// TODO
        content : $('#edit-content-@commentId', $inline).val()
      }
    }).done(
      curriedCallback($inline)
    ).fail(function(req) {
      $('#update-comment-@commentId, #cancel-comment-@commentId', $inline).removeAttr('disabled');
      $('#error-edit-content-@commentId', $inline).text($.parseJSON(req.responseText).content);
    });
  });

  $('#cancel-comment-@commentId').click(function(){
    $inline = $(this).closest('.inline-comment');
    $('#update-comment-@commentId, #cancel-comment-@commentId', $inline).attr('disabled', 'disabled');
    $.get('@path/@owner/@repository/commit_comments/_data/@commentId', curriedCallback($inline));
    return false;
  });
});
</script>
